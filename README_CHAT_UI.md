# 채팅 UI 사용 가이드

이 문서는 웹소켓 기반 채팅 애플리케이션 인터페이스 사용법을 설명합니다.

## 시작하기

1. 로컬 웹 서버 실행:
   ```bash
   node local_server.js
   ```

2. 브라우저에서 다음 주소로 접속:
   ```
   http://127.0.0.1:8080/
   ```

## 기능

- **채팅 메시지 전송**: 텍스트 메시지를 전송하고 수신할 수 있습니다.
- **메시지 이력 보기**: 이전 대화 내용을 불러올 수 있습니다.
- **교정 기능**: 받은 메시지의 내용을 교정할 수 있습니다.
- **이미지 전송**: S3 스토리지를 사용하여 이미지를 업로드하고 공유할 수 있습니다.

## 알려진 제한 사항

1. **CORS 제한**:
   - 브라우저의 Cross-Origin Resource Sharing(CORS) 정책 때문에 로컬 파일(`file://`)에서 직접 HTML을 열면 API 호출이 차단됩니다.
   - 해결: 반드시 로컬 웹 서버를 통해 접속하세요.

2. **이미지 업로드**:
   - S3 버킷의 CORS 설정이 완료되어 브라우저에서 직접 이미지를 업로드할 수 있습니다.
   - 이미지 크기는 10MB로 제한됩니다.
   - 지원되는 이미지 형식: JPEG, PNG, GIF, WEBP 등.

3. **인증 관련**:
   - 현재 `X-User-Id` 헤더를 통한 단순 사용자 식별만 지원합니다.
   - 실제 환경에서는 보안 강화를 위해 적절한 인증 메커니즘을 구현해야 합니다.

## 문제 해결

1. **WebSocket 연결 오류**:
   - 서버 URL이 올바른지 확인하세요.
   - 서버가 실행 중인지 확인하세요.
   - 브라우저 콘솔에서 오류 메시지를 확인하세요.

2. **메시지 로딩 실패**:
   - 올바른 방 ID와 사용자 ID를 입력했는지 확인하세요.
   - 로컬 웹 서버를 통해 접속했는지 확인하세요.

3. **서버 시작 오류**:
   - `EADDRINUSE` 오류가 발생하면 해당 포트가 이미 사용 중입니다.
   - 다른 프로세스를 종료하거나 `local_server.js`의 포트 번호를 변경하세요.

## 개발자 참고 사항

- WebSocket 연결: STOMP 프로토콜을 사용합니다.
- API 호출: 로컬 프록시 서버를 통해 백엔드 API를 호출합니다.
- UI 구성: HTML, CSS, JavaScript로 구현되었습니다.
- 이미지 처리: S3 Presigned URL을 활용하여 이미지를 업로드하고 공유합니다.

## 향후 개선 사항

1. 백엔드 서버에 파일 업로드 API 구현
2. 적절한 인증 메커니즘 추가
3. 실시간 사용자 온라인 상태 표시
4. 메시지 읽음 확인 기능
5. 이모티콘 및 미디어 공유 확장 